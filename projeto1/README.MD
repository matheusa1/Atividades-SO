# Projeto 1: Simula√ß√£o da Avalia√ß√£o de Padawans por Yoda

---

## Descri√ß√£o

Este projeto simula um cen√°rio inspirado no universo de Star Wars, onde Padawans passam por um processo de avalia√ß√£o conduzido pelo Mestre Yoda para se tornarem Jedi. O programa utiliza conceitos de programa√ß√£o concorrente, implementando threads e sem√°foros para sincronizar as intera√ß√µes entre Padawans, Yoda e o p√∫blico que assiste aos testes.

### Bibliotecas Utilizadas

- `pthread.h`
- `semaphore.h`
- `stdio.h`
- `stdlib.h`
- `unistd.h`

---

## Compila√ß√£o

Para compilar o programa, utilize o comando:

```bash
make co
```

Este comando ir√° compilar todos os m√≥dulos e gerar o execut√°vel `main`.

### Limpeza dos Arquivos Compilados

Para limpar os arquivos objeto e o execut√°vel gerado, utilize:

```bash
make cl
```

---

## Uso

Para executar o programa, utilize o comando:

```bash
make r
```

O programa ir√° iniciar a simula√ß√£o, exibindo as intera√ß√µes entre Padawans, Yoda e o p√∫blico durante o processo de avalia√ß√£o.

### Exemplo de Sa√≠da

```bash
make r
Padawan 0 est√° aguardando para entrar no sal√£o
Yoda liberou a entrada do Padawan
Yoda liberou a entrada do p√∫blico, 5 vagas
Padawan 0 entrou no sal√£o para realizar os testes
Padawan 0 est√° cumprimentando os mestres avaliadores
Espectador 0 est√° aguardando para entrar no sal√£o
Espectador 1 est√° aguardando para entrar no sal√£o
Padawan 0 terminou de cumprimentar os mestres avaliadores
Padawan 0 est√° pronto para ser avaliado
Yoda est√° iniciando os testes
Yoda est√° avaliando o Padawan
Yoda avaliou o Padawan com nota 85/100
Padawn aprovado üëç
Padawan 0 est√° aguardando a avalia√ß√£o
Padawan 0 recebeu a avalia√ß√£o
Padawan 0 est√° realizando a avalia√ß√£o
...
```

---

## Funcionamento

### Vis√£o Geral

O programa cria threads para representar:

- **Yoda**: Respons√°vel por avaliar os Padawans.
- **Padawans**: Alunos que desejam se tornar Jedi.
- **P√∫blico**: Espectadores que assistem √†s avalia√ß√µes.

A intera√ß√£o entre essas entidades √© sincronizada usando sem√°foros para controlar o acesso aos recursos compartilhados e garantir a ordem correta das opera√ß√µes.

### Estrutura do C√≥digo

- **main.c**: Ponto de entrada do programa. Inicializa os sem√°foros e cria as threads para Yoda, Padawans e P√∫blico.
- **Modules**:
  - **common**:
    - `globals.h` e `main.c`: Declara√ß√£o e defini√ß√£o dos sem√°foros e vari√°veis globais usadas para a sincroniza√ß√£o.
  - **padawan**:
    - `interface.h` e `main.c`: Cont√©m a l√≥gica das a√ß√µes realizadas pelos Padawans durante o teste.
  - **publico**:
    - `interface.h` e `main.c`: Cont√©m a l√≥gica do comportamento dos espectadores do p√∫blico.
  - **yoda**:
    - `interface.h` e `main.c`: Cont√©m a l√≥gica das a√ß√µes de Yoda durante a avalia√ß√£o dos Padawans.

### Detalhamento das Intera√ß√µes

1. **Inicializa√ß√£o**:

   - O programa define o n√∫mero de Padawans (`NUM_PADAWAN`) e de espectadores (`NUM_PUBLICO`).
   - Inicializa os sem√°foros e vari√°veis globais necess√°rias para a sincroniza√ß√£o.

2. **Cria√ß√£o das Threads**:

   - S√£o criadas threads para Yoda, cada Padawan e cada espectador do p√∫blico.
   - As threads dos Padawans e do P√∫blico recebem seus identificadores como argumentos.

3. **Execu√ß√£o das Threads**:

   - **Yoda**:

     - Controla o fluxo de entrada dos Padawans e do p√∫blico no sal√£o.
     - Aguarda que o Padawan esteja pronto para iniciar a avalia√ß√£o.
     - Realiza a avalia√ß√£o e determina o resultado (aprovado ou reprovado).
     - Caso o Padawan seja aprovado, ocorre o corte da tran√ßa (s√≠mbolo da promo√ß√£o a Jedi).
     - Garante que todas as etapas sejam sincronizadas corretamente usando sem√°foros.

   - **Padawan**:

     - Aguarda autoriza√ß√£o para entrar no sal√£o.
     - Cumprimenta os mestres avaliadores.
     - Prepara-se para a avalia√ß√£o e aguarda sua vez.
     - Realiza a avalia√ß√£o e aguarda o resultado.
     - Se aprovado, interage com Yoda para o corte da tran√ßa.
     - Sai do sal√£o ap√≥s o t√©rmino do processo.

   - **P√∫blico**:

     - Aguarda disponibilidade para entrar no sal√£o, respeitando o limite de vagas.
     - Assiste aos testes quando permitido.
     - Sai do sal√£o.

4. **Sincroniza√ß√£o**:

   - **Sem√°foros** s√£o utilizados para controlar o acesso e a sequ√™ncia das a√ß√µes:

     - `sem_padawan_entrada`: Controla quando o Padawan pode entrar no sal√£o.
     - `sem_publico_entrada`: Controla quando os espectadores podem entrar.
     - `sem_padawan_pronto`: Indica que o Padawan est√° pronto para ser avaliado.
     - `sem_avaliacao_andamento`: Sincroniza o in√≠cio da avalia√ß√£o com o Padawan e o p√∫blico.
     - `sem_avaliacao_resultado`: Controla a comunica√ß√£o do resultado ao Padawan.
     - `sem_aguarda_corte_tran√ßa`: Utilizado quando o Padawan √© aprovado e aguarda o corte da tran√ßa.
     - `sem_padawan_saiu`: Indica que o Padawan saiu do sal√£o.
     - `sem_vagas_publico_utilizadas`: Controla o n√∫mero de vagas ocupadas pelo p√∫blico.

5. **Finaliza√ß√£o**:

   - O programa aguarda a conclus√£o das threads dos Padawans.
   - Yoda imprime uma mensagem final baseada no desempenho dos Padawans.
   - As threads do p√∫blico s√£o canceladas, pois seu trabalho termina com a avalia√ß√£o dos Padawans.

### Mensagens de Yoda

Ao final das avalia√ß√µes, Yoda exibe uma mensagem que varia de acordo com o n√∫mero de Padawans aprovados:

- **Todos aprovados**: Mensagem de grande orgulho e emo√ß√£o.
- **Nenhum aprovado**: Expressa tristeza e desapontamento, mas encoraja a persist√™ncia.
- **Mais da metade aprovados**: Mistura de orgulho pelos aprovados e encorajamento aos demais.
- **Menos da metade aprovados**: Reconhece os aprovados, mas destaca o desapontamento com os reprovados.

---

## Autor

Matheus Santos de Andrade
Jo√£o Vitor Girotto

## Data

15/12/2024
